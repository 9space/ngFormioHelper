!function e(r,t,o){function n(i,s){if(!t[i]){if(!r[i]){var u="function"==typeof require&&require;if(!s&&u)return u(i,!0);if(a)return a(i,!0);var l=new Error("Cannot find module '"+i+"'");throw l.code="MODULE_NOT_FOUND",l}var c=t[i]={exports:{}};r[i][0].call(c.exports,function(e){var t=r[i][1][e];return n(t?t:e)},c,c.exports,e,r,t,o)}return t[i].exports}for(var a="function"==typeof require&&require,i=0;i<o.length;i++)n(o[i]);return n}({1:[function(e,r,t){"use strict";angular.module("ngFormioHelper",["formio","ui.router"]).filter("capitalize",[function(){return _.capitalize}]).filter("truncate",[function(){return function(e,r){return _.isNumber(r)&&(r={length:r}),_.truncate(e,r)}}]).directive("fileread",[function(){return{scope:{fileread:"="},link:function(e,r){r.bind("change",function(r){var t=new FileReader;t.onloadend=function(r){e.$apply(function(){e.fileread=jQuery(r.target.result)})},t.readAsText(r.target.files[0])})}}}]).provider("FormioResource",["$stateProvider",function(e){var r={};return{register:function(t,o,n){r[t]=t;var a=n&&n.parent?n.parent:null,i=t+"Id",s=function(e){var r={};return r[i]=e._id,r},u=function(e){return["$scope","$rootScope","$state","$stateParams","Formio","FormioUtils","$controller",e]},l=n&&n.templates?n.templates:{};e.state(t+"Index",{url:"/"+t,parent:a?a:null,params:n.params&&n.params.index,templateUrl:l.index?l.index:"formio-helper/resource/index.html",controller:u(function(e,r,a,u,l,c,m){e.currentResource={name:t,queryId:i,formUrl:o},e.$on("submissionView",function(e,r){a.go(t+".view",s(r))}),e.$on("submissionEdit",function(e,r){a.go(t+".edit",s(r))}),e.$on("submissionDelete",function(e,r){a.go(t+".delete",s(r))}),n&&n.index&&m(n.index,{$scope:e})})}).state(t+"Create",{url:"/create/"+t,parent:a?a:null,params:n.params&&n.params.create,templateUrl:l.create?l.create:"formio-helper/resource/create.html",controller:u(function(e,r,a,u,l,c,m){e.currentResource={name:t,queryId:i,formUrl:o},e.submission=n.defaultValue?n.defaultValue:{data:{}};var f=!1;if(n&&n.create){var p=m(n.create,{$scope:e});f=p.handle||!1}f||e.$on("formSubmission",function(e,r){a.go(t+".view",s(r))})})}).state(t,{"abstract":!0,url:"/"+t+"/:"+i,parent:a?a:null,templateUrl:"formio-helper/resource/resource.html",controller:u(function(e,r,s,u,l,c,m){var f=o+"/submission/"+u[i];e.currentResource=e[t]={name:t,queryId:i,formUrl:o,submissionUrl:f,formio:new l(f),resource:{},form:{},href:"/#/"+t+"/"+u[i]+"/",parent:a?e[a]:{href:"/#/",name:"home"}},e.currentResource.loadFormPromise=e.currentResource.formio.loadForm().then(function(r){e.currentResource.form=e[t].form=r}),e.currentResource.loadSubmissionPromise=e.currentResource.formio.loadSubmission().then(function(r){e.currentResource.resource=e[t].submission=r}),n&&n["abstract"]&&m(n["abstract"],{$scope:e})})}).state(t+".view",{url:"/",parent:t,params:n.params&&n.params.view,templateUrl:l.view?l.view:"formio-helper/resource/view.html",controller:u(function(e,r,t,o,a,i,s){n&&n.view&&s(n.view,{$scope:e})})}).state(t+".edit",{url:"/edit",parent:t,params:n.params&&n.params.edit,templateUrl:l.edit?l.edit:"formio-helper/resource/edit.html",controller:u(function(e,r,o,a,i,u,l){var c=!1;if(n&&n.edit){var m=l(n.edit,{$scope:e});c=m.handle||!1}c||e.$on("formSubmission",function(e,r){o.go(t+".view",s(r))})})}).state(t+".delete",{url:"/delete",parent:t,params:n.params&&n.params["delete"],templateUrl:l["delete"]?l["delete"]:"formio-helper/resource/delete.html",controller:u(function(e,r,t,o,i,s,u){var l=!1;if(n&&n["delete"]){var c=u(n["delete"],{$scope:e});l=c.handle||!1}l||e.$on("delete",function(){a&&"home"!==a?t.go(a+".view"):t.go("home",null,{reload:!0})})})})},$get:function(){return r}}}]).provider("FormioAuth",["$stateProvider",function(e){var r="auth.login",t="home",o=!1;return e.state("auth",{"abstract":!0,url:"/auth",templateUrl:"views/user/auth.html"}),{setForceAuth:function(e){o=e},setStates:function(e,o){r=e,t=o},register:function(r,o,n){n||(n=r),e.state("auth."+r,{url:"/"+n,parent:"auth",templateUrl:"views/user/"+r.toLowerCase()+".html",controller:["$scope","$state","$rootScope",function(e,r,n){e.$on("formSubmission",function(e,a){a&&(n.setUser(a,o),r.go(t))})}]})},$get:["Formio","FormioAlerts","$rootScope","$state","$stateParams",function(e,t,n,a,i){return{init:function(){n.user={},n.isRole=function(e){return n.role===e.toLowerCase()},n.setUser=function(r,t){r?(n.user=r,localStorage.setItem("formioAppUser",angular.toJson(r))):(n.user=null,localStorage.removeItem("formioAppUser"),localStorage.removeItem("formioUser"),localStorage.removeItem("formioToken")),t?(n.role=t.toLowerCase(),localStorage.setItem("formioAppRole",t)):(n.role=null,localStorage.removeItem("formioAppRole")),n.authenticated=!!e.getToken()};var s=localStorage.getItem("formioAppUser");n.setUser(s?angular.fromJson(s):null,localStorage.getItem("formioAppRole")),n.user||e.currentUser().then(function(e){n.setUser(e,localStorage.getItem("formioRole"))});var u=function(){a.go(r,{},{reload:!0}),t.addAlert({type:"danger",message:"Your session has expired. Please log in again."})};n.$on("formio.sessionExpired",u),n.$on("formio.unauthorized",function(){n.setUser(null,null),a.go(r,{},{reload:!0})}),n.logout=function(){n.setUser(null,null),e.logout().then(function(){a.go(r,{},{reload:!0})})["catch"](u)},n.$on("$stateChangeStart",function(t,i){if(n.authenticated=!!e.getToken(),o){if("auth"===i.name.substr(0,4))return;n.authenticated||(t.preventDefault(),a.go(r,{},{reload:!0}))}}),n.$on("$stateChangeSuccess",function(){n.breadcrumbs=[];for(var e in a.$current.path){var r=a.$current.path[e];r["abstract"]&&n.breadcrumbs.push({name:r.name,state:r.name+".view({"+r.name+'Id:"'+i[r.name+"Id"]+'"})'})}n.alerts=t.getAlerts()})}}}]}}]).factory("FormioAlerts",["$rootScope",function(e){var r=[];return{addAlert:function(t){e.alerts.push(t),t.element?angular.element("#form-group-"+t.element).addClass("has-error"):r.push(t)},getAlerts:function(){var e=angular.copy(r);return r.length=0,r=[],e},onError:function t(e){if(e.message)this.addAlert({type:"danger",message:e.message,element:e.path});else{var r=e.hasOwnProperty("errors")?e.errors:e.data.errors;angular.forEach(r,t.bind(this))}}}}]).run(["$templateCache",function(e){e.put("formio-helper/resource/resource.html",'<h2>{{ currentResource.name | capitalize }}</h2>\n<ul class="nav nav-tabs">\n  <li role="presentation" ng-class="{active:isActive(currentResource.name + \'.view\')}"><a ui-sref="{{ currentResource.name }}.view()">View</a></li>\n  <li role="presentation" ng-class="{active:isActive(currentResource.name + \'.edit\')}"><a ui-sref="{{ currentResource.name }}.edit()">Edit</a></li>\n  <li role="presentation" ng-class="{active:isActive(currentResource.name + \'.delete\')}"><a ui-sref="{{ currentResource.name }}.delete()">Delete</a></li>\n</ul>\n<div ui-view></div>\n'),e.put("formio-helper/resource/create.html",'<h3>New {{ currentResource.name | capitalize }}</h3>\n<hr></hr>\n<formio src="currentResource.formUrl" submission="submission"></formio>\n'),e.put("formio-helper/resource/delete.html",'<formio-delete src="currentResource.submissionUrl"></formio-delete>\n'),e.put("formio-helper/resource/edit.html",'<formio src="currentResource.submissionUrl"></formio>\n'),e.put("formio-helper/resource/index.html",'<formio-submissions src="currentResource.formUrl"></formio-submissions>\n<a ui-sref="{{ currentResource.name }}Create()" class="btn btn-primary"><span class="glyphicon glyphicon-plus" aria-hidden="true"></span> New {{ currentResource.name | capitalize }}</a>\n'),e.put("formio-helper/resource/view.html",'<formio src="currentResource.submissionUrl" read-only="true"></formio>\n')}])},{}]},{},[1]);